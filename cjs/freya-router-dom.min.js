"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var resolvePathname=_interopDefault(require("resolve-pathname")),valueEqual=_interopDefault(require("value-equal"));require("tiny-warning");var invariant=_interopDefault(require("tiny-invariant")),createContext=_interopDefault(require("mini-create-react-context")),React=_interopDefault(require("react"));require("prop-types");var pathToRegexp=_interopDefault(require("path-to-regexp"));require("react-is");var hoistStatics=_interopDefault(require("hoist-non-react-statics")),reactKeepAlive=require("react-keep-alive");function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||(r[n]=e[n]);return r}function addLeadingSlash(e){return"/"===e.charAt(0)?e:"/"+e}function stripLeadingSlash(e){return"/"===e.charAt(0)?e.substr(1):e}function hasBasename(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}function stripBasename(e,t){return hasBasename(e,t)?e.substr(t.length):e}function stripTrailingSlash(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function parsePath(e){var t=e||"/",n="",a="",r=t.indexOf("#");-1!==r&&(a=t.substr(r),t=t.substr(0,r));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===a?"":a}}function createPath(e){var t=e.pathname,n=e.search,a=e.hash,r=t||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),a&&"#"!==a&&(r+="#"===a.charAt(0)?a:"#"+a),r}function createLocation(e,t,n,a){var r;return"string"==typeof e?(r=parsePath(e)).state=t:(void 0===(r=_extends({},e)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==t&&void 0===r.state&&(r.state=t)),n&&(r.key=n),a?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=resolvePathname(r.pathname,a.pathname)):r.pathname=a.pathname:r.pathname||(r.pathname="/"),r}function locationsAreEqual(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&valueEqual(e.state,t.state)}function createTransitionManager(){var o=null;var a=[];return{setPrompt:function(e){return o=e,function(){o===e&&(o=null)}},confirmTransitionTo:function(e,t,n,a){if(null!=o){var r="function"==typeof o?o(e,t):o;"string"==typeof r?"function"==typeof n?n(r,a):a(!0):a(!1!==r)}else a(!0)},appendListener:function(e){var t=!0;function n(){t&&e.apply(void 0,arguments)}return a.push(n),function(){t=!1,a=a.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.forEach(function(e){return e.apply(void 0,t)})}}}var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement);function getConfirmation(e,t){t(window.confirm(e))}function supportsHistory(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}function supportsPopStateOnHashChange(){return-1===window.navigator.userAgent.indexOf("Trident")}function supportsGoWithoutReloadUsingHash(){return-1===window.navigator.userAgent.indexOf("Firefox")}function isExtraneousPopstateEvent(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}var PopStateEvent="popstate",HashChangeEvent="hashchange";function getHistoryState(){try{return window.history.state||{}}catch(e){return{}}}function createBrowserHistory(e){void 0===e&&(e={}),canUseDOM||invariant(!1);var c=window.history,s=supportsHistory(),t=!supportsPopStateOnHashChange(),n=null,a=e,r=a.forceRefresh,u=void 0!==r&&r,o=a.getUserConfirmation,h=void 0===o?getConfirmation:o,i=a.keyLength,l=void 0===i?6:i,p=e.basename?stripTrailingSlash(addLeadingSlash(e.basename)):"";function f(e){var t=e||{},n=t.key,a=t.state,r=window.location,o=r.pathname+r.search+r.hash;return p&&(o=stripBasename(o,p)),createLocation(o,a,n)}function d(){return Math.random().toString(36).substr(2,l)}var m=createTransitionManager();function v(e){e&&"PUSH"==e.action?window.globalManger.push(e.location):"REPLACE"==e.action?(window.globalManger.pop(),window.globalManger.push(e.location)):"POP"==e.action&&(n?(window.globalManger=window.globalManger.slice(0,n),n=null):window.globalManger.pop()),Object.assign(C,e),C.length=c.length,m.notifyListeners(C.location,C.action)}function g(e){isExtraneousPopstateEvent(e)||P(f(e.state))}function y(){P(f(getHistoryState()))}var E=!1;function P(t){if(E)E=!1,v();else{m.confirmTransitionTo(t,"POP",h,function(e){e?v({action:"POP",location:t}):function(e){var t=C.location,n=x.indexOf(t.key);-1===n&&(n=0);var a=x.indexOf(e.key);-1===a&&(a=0);var r=n-a;r&&(E=!0,w(r))}(t)})}}var R=f(getHistoryState());window.globalManger=[R];var x=[R.key];function _(e){return p+createPath(e)}function w(e){n=e,c.go(e)}var S=0;function T(e){1===(S+=e)&&1===e?(window.addEventListener(PopStateEvent,g),t&&window.addEventListener(HashChangeEvent,y)):0===S&&(window.removeEventListener(PopStateEvent,g),t&&window.removeEventListener(HashChangeEvent,y))}var L=!1;var C={length:c.length,action:"POP",location:R,createHref:_,push:function(e,t){var i=createLocation(e,t,d(),C.location);m.confirmTransitionTo(i,"PUSH",h,function(e){if(e){var t=_(i),n=i.key,a=i.state;if(s)if(c.pushState({key:n,state:a},null,t),u)window.location.href=t;else{var r=x.indexOf(C.location.key),o=x.slice(0,-1===r?0:r+1);o.push(i.key),x=o,v({action:"PUSH",location:i})}else window.location.href=t}})},replace:function(e,t){var o="REPLACE",i=createLocation(e,t,d(),C.location);m.confirmTransitionTo(i,o,h,function(e){if(e){var t=_(i),n=i.key,a=i.state;if(s)if(c.replaceState({key:n,state:a},null,t),u)window.location.replace(t);else{var r=x.indexOf(C.location.key);-1!==r&&(x[r]=i.key),v({action:o,location:i})}else window.location.replace(t)}})},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},block:function(e){void 0===e&&(e=!1);var t=m.setPrompt(e);return L||(T(1),L=!0),function(){return L&&(L=!1,T(-1)),t()}},listen:function(e){var t=m.appendListener(e);return T(1),function(){T(-1),t()}}};return C}console.log("======== freya-history =========");var HashChangeEvent$1="hashchange",HashPathCoders={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+stripLeadingSlash(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash},slash:{encodePath:addLeadingSlash,decodePath:addLeadingSlash}};function getHashPath(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function pushHashPath(e){window.location.hash=e}function replaceHashPath(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,0<=t?t:0)+"#"+e)}function createHashHistory(e){void 0===e&&(e={}),canUseDOM||invariant(!1);var t=window.history,n=(supportsGoWithoutReloadUsingHash(),e),a=n.getUserConfirmation,i=void 0===a?getConfirmation:a,r=n.hashType,o=void 0===r?"slash":r,c=e.basename?stripTrailingSlash(addLeadingSlash(e.basename)):"",s=HashPathCoders[o],u=s.encodePath,h=s.decodePath;function l(){var e=h(getHashPath());return c&&(e=stripBasename(e,c)),createLocation(e)}var p=createTransitionManager();function f(e){Object.assign(S,e),S.length=t.length,p.notifyListeners(S.location,S.action)}var d=!1,m=null;function v(){var e=getHashPath(),t=u(e);if(e!==t)replaceHashPath(t);else{var n=l(),a=S.location;if(!d&&locationsAreEqual(a,n))return;if(m===createPath(n))return;m=null,function(t){if(d)d=!1,f();else{p.confirmTransitionTo(t,"POP",i,function(e){e?f({action:"POP",location:t}):function(e){var t=S.location,n=P.lastIndexOf(createPath(t));-1===n&&(n=0);var a=P.lastIndexOf(createPath(e));-1===a&&(a=0);var r=n-a;r&&(d=!0,R(r))}(t)})}}(n)}}var g=getHashPath(),y=u(g);g!==y&&replaceHashPath(y);var E=l(),P=[createPath(E)];function R(e){t.go(e)}var x=0;function _(e){1===(x+=e)&&1===e?window.addEventListener(HashChangeEvent$1,v):0===x&&window.removeEventListener(HashChangeEvent$1,v)}var w=!1;var S={length:t.length,action:"POP",location:E,createHref:function(e){return"#"+u(c+createPath(e))},push:function(e,t){var o=createLocation(e,void 0,void 0,S.location);p.confirmTransitionTo(o,"PUSH",i,function(e){if(e){var t=createPath(o),n=u(c+t);if(getHashPath()!==n){m=t,pushHashPath(n);var a=P.lastIndexOf(createPath(S.location)),r=P.slice(0,-1===a?0:a+1);r.push(t),P=r,f({action:"PUSH",location:o})}else f()}})},replace:function(e,t){var r="REPLACE",o=createLocation(e,void 0,void 0,S.location);p.confirmTransitionTo(o,r,i,function(e){if(e){var t=createPath(o),n=u(c+t);getHashPath()!==n&&(m=t,replaceHashPath(n));var a=P.indexOf(createPath(S.location));-1!==a&&(P[a]=t),f({action:r,location:o})}})},go:R,goBack:function(){R(-1)},goForward:function(){R(1)},block:function(e){void 0===e&&(e=!1);var t=p.setPrompt(e);return w||(_(1),w=!0),function(){return w&&(w=!1,_(-1)),t()}},listen:function(e){var t=p.appendListener(e);return _(1),function(){_(-1),t()}}};return S}function clamp(e,t,n){return Math.min(Math.max(e,t),n)}function createMemoryHistory(e){void 0===e&&(e={});var t=e,r=t.getUserConfirmation,n=t.initialEntries,a=void 0===n?["/"]:n,o=t.initialIndex,i=void 0===o?0:o,c=t.keyLength,s=void 0===c?6:c,u=createTransitionManager();function h(e){Object.assign(v,e),v.length=v.entries.length,u.notifyListeners(v.location,v.action)}function l(){return Math.random().toString(36).substr(2,s)}var p=clamp(i,0,a.length-1),f=a.map(function(e){return createLocation(e,void 0,"string"==typeof e?l():e.key||l())}),d=createPath;function m(e){var t=clamp(v.index+e,0,v.entries.length-1),n=v.entries[t];u.confirmTransitionTo(n,"POP",r,function(e){e?h({action:"POP",location:n,index:t}):h()})}var v={length:f.length,action:"POP",location:f[p],index:p,entries:f,createHref:d,push:function(e,t){var a=createLocation(e,t,l(),v.location);u.confirmTransitionTo(a,"PUSH",r,function(e){if(e){var t=v.index+1,n=v.entries.slice(0);n.length>t?n.splice(t,n.length-t,a):n.push(a),h({action:"PUSH",location:a,index:t,entries:n})}})},replace:function(e,t){var n="REPLACE",a=createLocation(e,t,l(),v.location);u.confirmTransitionTo(a,n,r,function(e){e&&(v.entries[v.index]=a,h({action:n,location:a}))})},go:m,goBack:function(){m(-1)},goForward:function(){m(1)},canGo:function(e){var t=v.index+e;return 0<=t&&t<v.entries.length},block:function(e){return void 0===e&&(e=!1),u.setPrompt(e)},listen:function(e){return u.appendListener(e)}};return v}var createNamedContext=function(e){var t=createContext();return t.displayName=e,t},context=createNamedContext("Router"),Router=function(n){function e(e){var t;return(t=n.call(this,e)||this).state={location:e.history.location},t._isMounted=!1,t._pendingLocation=null,e.staticContext||(t.unlisten=e.history.listen(function(e){t._isMounted?t.setState({location:e}):t._pendingLocation=e})),t}_inheritsLoose(e,n),e.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var t=e.prototype;return t.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},t.componentWillUnmount=function(){this.unlisten&&this.unlisten()},t.render=function(){return React.createElement(context.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}})},e}(React.Component),MemoryRouter=function(r){function e(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))||this).history=createMemoryHistory(e.props),e}return _inheritsLoose(e,r),e.prototype.render=function(){return React.createElement(Router,{history:this.history,children:this.props.children})},e}(React.Component),Lifecycle=function(e){function t(){return e.apply(this,arguments)||this}_inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(React.Component);function Prompt(e){var a=e.message,t=e.when,r=void 0===t||t;return React.createElement(context.Consumer,null,function(e){if(e||invariant(!1),!r||e.staticContext)return null;var n=e.history.block;return React.createElement(Lifecycle,{onMount:function(e){e.release=n(a)},onUpdate:function(e,t){t.message!==a&&(e.release(),e.release=n(a))},onUnmount:function(e){e.release()},message:a})})}var cache={},cacheLimit=1e4,cacheCount=0;function compilePath(e){if(cache[e])return cache[e];var t=pathToRegexp.compile(e);return cacheCount<cacheLimit&&(cache[e]=t,cacheCount++),t}function generatePath(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:compilePath(e)(t,{pretty:!0})}function Redirect(e){var o=e.computedMatch,i=e.to,t=e.push,c=void 0!==t&&t;return React.createElement(context.Consumer,null,function(e){e||invariant(!1);var t=e.history,n=e.staticContext,a=c?t.push:t.replace,r=createLocation(o?"string"==typeof i?generatePath(i,o.params):_extends({},i,{pathname:generatePath(i.pathname,o.params)}):i);return n?(a(r),null):React.createElement(Lifecycle,{onMount:function(){a(r)},onUpdate:function(e,t){var n=createLocation(t.to);locationsAreEqual(n,_extends({},r,{key:n.key}))||a(r)},to:i})})}var cache$1={},cacheLimit$1=1e4,cacheCount$1=0;function compilePath$1(e,t){var n=""+t.end+t.strict+t.sensitive,a=cache$1[n]||(cache$1[n]={});if(a[e])return a[e];var r=[],o={regexp:pathToRegexp(e,r,t),keys:r};return cacheCount$1<cacheLimit$1&&(a[e]=o,cacheCount$1++),o}function matchPath(u,e){void 0===e&&(e={}),"string"!=typeof e&&!Array.isArray(e)||(e={path:e});var t=e,n=t.path,a=t.exact,h=void 0!==a&&a,r=t.strict,l=void 0!==r&&r,o=t.sensitive,p=void 0!==o&&o;return[].concat(n).reduce(function(e,t){if(!t)return null;if(e)return e;var n=compilePath$1(t,{end:h,strict:l,sensitive:p}),a=n.regexp,r=n.keys,o=a.exec(u);if(!o)return null;var i=o[0],c=o.slice(1),s=u===i;return h&&!s?null:{path:t,url:"/"===t&&""===i?"/":i,isExact:s,params:r.reduce(function(e,t,n){return e[t.name]=c[n],e},{})}},null)}function isEmptyChildren(e){return 0===React.Children.count(e)}var Route=function(e){function t(){return e.apply(this,arguments)||this}return _inheritsLoose(t,e),t.prototype.render=function(){var c=this;return React.createElement(context.Consumer,null,function(e){e||invariant(!1);var t=c.props.location||e.location,n=_extends({},e,{location:t,match:c.props.computedMatch?c.props.computedMatch:c.props.path?matchPath(t.pathname,c.props):e.match}),a=c.props,r=a.children,o=a.component,i=a.render;return Array.isArray(r)&&0===r.length&&(r=null),"function"==typeof r&&void 0===(r=r(n))&&(r=null),React.createElement(context.Provider,{value:n},r&&!isEmptyChildren(r)?r:n.match?o?React.createElement(o,n):i?i(n):null:null)})},t}(React.Component);function addLeadingSlash$1(e){return"/"===e.charAt(0)?e:"/"+e}function addBasename(e,t){return e?_extends({},t,{pathname:addLeadingSlash$1(e)+t.pathname}):t}function stripBasename$1(e,t){if(!e)return t;var n=addLeadingSlash$1(e);return 0!==t.pathname.indexOf(n)?t:_extends({},t,{pathname:t.pathname.substr(n.length)})}function createURL(e){return"string"==typeof e?e:createPath(e)}function staticHandler(e){return function(){invariant(!1)}}function noop(){}var StaticRouter=function(r){function e(){for(var t,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(t=r.call.apply(r,[this].concat(n))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return noop},t.handleBlock=function(){return noop},t}_inheritsLoose(e,r);var t=e.prototype;return t.navigateTo=function(e,t){var n=this.props,a=n.basename,r=void 0===a?"":a,o=n.context,i=void 0===o?{}:o;i.action=t,i.location=addBasename(r,createLocation(e)),i.url=createURL(i.location)},t.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,a=e.context,r=void 0===a?{}:a,o=e.location,i=void 0===o?"/":o,c=_objectWithoutPropertiesLoose(e,["basename","context","location"]),s={createHref:function(e){return addLeadingSlash$1(n+createURL(e))},action:"POP",location:stripBasename$1(n,createLocation(i)),push:this.handlePush,replace:this.handleReplace,go:staticHandler("go"),goBack:staticHandler("goBack"),goForward:staticHandler("goForward"),listen:this.handleListen,block:this.handleBlock};return React.createElement(Router,_extends({},c,{history:s,staticContext:r}))},e}(React.Component),push_match={background:"#fff",boxShadow:"-2px 0 5px rgba(0, 0, 0, .2)"},push_current={zIndex:-1,position:"absolute",left:0,top:0},gesture_current={zIndex:-1,position:"absolute",left:0,top:0},pop_match={background:"#fff",boxShadow:"-2px 0 5px rgba(0, 0, 0, .2)"},pop_current={position:"absolute",left:0,top:0,boxShadow:"-2px 0 5px rgba(0, 0, 0, .2)",background:"#fff"},Switch=function(e){function t(){return e.apply(this,arguments)||this}return _inheritsLoose(t,e),t.prototype.render=function(){var t=this;return React.createElement(context.Consumer,null,function(e){return React.createElement(AnimateRoute,_extends({},t.props,{adapt:e}))})},t}(React.Component),isWebView="undefined"!=typeof navigator&&/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),AnimateRoute=function(a){function e(){for(var h,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(h=a.call.apply(a,[this].concat(t))||this).currentPage=null,h.matchPage=null,h.action="",h.canAnimate=!0,h.SCREEN_WIDTH=window.innerWidth,h.MATCH_SCREEN_OFFSET=h.SCREEN_WIDTH,h.BOTTOM_SCREEN_OFFSET=.3*-h.SCREEN_WIDTH,h.BACK_ACTIVE_POSITION=.1*h.SCREEN_WIDTH,h.SIZE={width:window.innerWidth,height:window.innerHeight},h.disabledBodyTouch=function(e){e._isScroller||e.preventDefault()},h.toggleBodyTouch=function(e){e?document.body.removeEventListener("touchmove",h.disabledBodyTouch):document.body.addEventListener("touchmove",h.disabledBodyTouch,{passive:!1})},h.easeInQuad=function(e,t,n,a){var r=e/a;return t+n*(r*r)},h.easeOutQuad=function(e,t,n,a){var r=e/a;return t+n*(-r*r+2*r)},h.easeInOut=function(e,t,n,a){if(e<a/2)return h.easeInQuad(e,t,n/2,a/2);var r=e-a/2,o=t+n/2;return h.easeOutQuad(r,o,n/2,a/2)},h.animate=function(e){var r=e.begin,o=e.end,i=e.ref,c=e.done,t=e.type,n=void 0===t?"ease-in-out":t,a=e.duration,s=void 0===a?.1:a,u="ease-in-out"==n?h.easeInOut:"ease-in"==n?h.easeInQuad:"ease-out"==n?h.easeOutQuad:h.easeInOut;!function t(n){var a=u(n,r,o-r,s);requestAnimationFrame(function(e){i.style.transform="translate3d("+a+"px,0px,0)",a!=o?t(n+.01):c&&c()})}(0)},h.animatePop=function(){h.animate({begin:h.BOTTOM_SCREEN_OFFSET,end:0,ref:h.matchRef}),h.animate({begin:0,end:h.MATCH_SCREEN_OFFSET,ref:h.currentRef,done:function(e){return h.currentRef.style.display="none"}})},h.animatePush=function(){h.animate({begin:h.MATCH_SCREEN_OFFSET,end:0,ref:h.matchRef}),h.animate({begin:0,end:h.BOTTOM_SCREEN_OFFSET,ref:h.currentRef})},h.findMatchElement=function(n){var a,r;return n=n||h.props.location||h.props.adapt.location,React.Children.forEach(h.props.children,function(e){if(null==r&&React.isValidElement(e)){var t=(a=e).props.path||e.props.from;r=t?matchPath(n.pathname,_extends({},e.props,{path:t})):h.props.adapt.match}}),r?React.cloneElement(a,{location:n,computedMatch:r}):null},h.findMatchElementByLocation=function(e){return h.findMatchElement(e)},h.setTransform=function(e){h.matchRef.style.transform="translate3d("+e+"px,0px,0)",h.setBottomTransform(e)},h.setBottomTransform=function(e){var t=h.BOTTOM_SCREEN_OFFSET+.3*e;h.currentRef.style.transform="translate3d("+t+"px,0px,0)"},h.onTouchStart=function(e){document.getElementById("root").style.overflow="hidden",h._ScreenX=h._startScreenX=e.touches[0].screenX,h.gestureBackActive=h._startScreenX<h.BACK_ACTIVE_POSITION,h._lastScreenX=h._lastScreenX||0,h.startTime=+new Date},h.onTouchMove=function(e){if(h.gestureBackActive){var t=e.touches[0].screenX;if(!(h._startScreenX>t)){e.preventDefault();var n=Math.round(t-h._ScreenX);h._ScreenX=t,h._lastScreenX+=n,h.setTransform(h._lastScreenX),isWebView&&e.changedTouches[0].clientY<0&&h.onTouchEnd()}}},h.reset=function(){h.animate({begin:h._lastScreenX,end:0,ref:h.matchRef})},h.onTouchEnd=function(e){if(h.gestureBackActive){var t=+new Date-h.startTime;document.getElementById("root").style.overflow=null,t<300&&h._lastScreenX>.2*h.SCREEN_WIDTH?(h.animate({begin:h.BOTTOM_SCREEN_OFFSET+.3*h._lastScreenX,end:0,ref:h.currentRef,duration:.05}),h.animate({begin:h._lastScreenX,end:h.SCREEN_WIDTH,ref:h.matchRef,done:h.props.adapt.history.goBack,type:"ease-out",duration:.05}),h._lastScreenX=0,h.fromGesture=!0,h.gestureBackActive=!1):(h._lastScreenX<h.SCREEN_WIDTH/2?h.reset():(h.animate({begin:h.BOTTOM_SCREEN_OFFSET+.3*h._lastScreenX,end:0,ref:h.currentRef,duration:.05}),h.animate({begin:h._lastScreenX,end:h.SCREEN_WIDTH,ref:h.matchRef,done:h.props.adapt.history.goBack,type:"ease-out",duration:.05}),h.fromGesture=!0),h.gestureBackActive=!1,h._lastScreenX=0)}},h.renderGesture=function(){return h.single?h.matchPage:(h.currentPage=h.findMatchElementByLocation(window.globalManger[window.globalManger.length-2]),React.createElement(React.Fragment,null,React.createElement("div",{style:_extends({transform:"translate3d("+h.BOTTOM_SCREEN_OFFSET+"px,0px,0)"},h.SIZE,{gesture_current:gesture_current}),key:Math.random(),ref:function(e){return h.currentRef=e}},h.currentPage),React.createElement("div",{onTouchStart:h.onTouchStart,onTouchMove:h.onTouchMove,onTouchEnd:h.onTouchEnd,style:_extends({},h.SIZE,pop_match),key:Math.random(),ref:function(e){return h.matchRef=e}},h.matchPage)))},h.renderPop=function(){return h.currentPage?h.fromGesture?h.renderGesture():h.currentPage.props.path==h.matchPage.props.path?(h.props.adapt.history.goBack(),h.canAnimate=!1,h.matchPage):React.createElement(React.Fragment,null,React.createElement("div",{onTouchStart:h.single?null:h.onTouchStart,onTouchMove:h.single?null:h.onTouchMove,onTouchEnd:h.single?null:h.onTouchEnd,style:_extends({transform:"translate3d("+h.BOTTOM_SCREEN_OFFSET+"px,0px,0)"},h.SIZE,pop_match),key:Math.random(),ref:function(e){return h.matchRef=e}},h.matchPage),React.createElement("div",{style:_extends({transform:"translate3d(0px,0px,0)"},h.SIZE,pop_current),key:Math.random(),ref:function(e){return h.currentRef=e}},h.currentPage)):h.matchPage},h.renderPush=function(){return h.single&&"REPLACE"==h.action?(h.canAnimate=!1,h.matchPage):React.createElement(React.Fragment,null,React.createElement("div",{style:_extends({transform:"translate3d(0px,0px,0)"},h.SIZE,push_current),key:Math.random(),ref:function(e){return h.currentRef=e}},h.currentPage),React.createElement("div",{onTouchStart:h.onTouchStart,onTouchMove:h.onTouchMove,onTouchEnd:h.onTouchEnd,style:_extends({transform:"translate3d("+h.MATCH_SCREEN_OFFSET+"px,0px,0)"},h.SIZE,push_match),key:Math.random(),ref:function(e){return h.matchRef=e}},h.matchPage))},h.preRender=function(){h.action=h.props.adapt.history.action,h.single=1==window.globalManger.length,h.toggleBodyTouch(h.single),h.currentPage=h.matchPage,h.matchPage=h.findMatchElement()},h}_inheritsLoose(e,a);var t=e.prototype;return t.componentDidUpdate=function(e,t,n){this.canAnimate&&!this.fromGesture&&("POP"==this.action?this.animatePop():this.animatePush()),this.fromGesture=!1,this.canAnimate=!0},t.render=function(){return this.preRender(),this.matchPage?"POP"==this.action?this.renderPop():this.renderPush():"404"},e}(React.Component);function withRouter(a){function e(e){var t=e.wrappedComponentRef,n=_objectWithoutPropertiesLoose(e,["wrappedComponentRef"]);return React.createElement(context.Consumer,null,function(e){return e||invariant(!1),React.createElement(a,_extends({},n,e,{ref:t}))})}var t="withRouter("+(a.displayName||a.name)+")";return e.displayName=t,e.WrappedComponent=a,hoistStatics(e,a)}function renderRoutes(e){return React.createElement(reactKeepAlive.Provider,null,React.createElement(Switch,null,e.map(function(t,n){return React.createElement(Route,_extends({key:n},t,{component:function(e){return React.createElement(reactKeepAlive.KeepAlive,{name:n.toString()},React.createElement("div",null,React.createElement(t.component,e)))}}))})))}var BrowserRouter=function(r){function e(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))||this).history=createBrowserHistory(e.props),e}return _inheritsLoose(e,r),e.prototype.render=function(){return React.createElement(Router,{history:this.history,children:this.props.children})},e}(React.Component),HashRouter=function(r){function e(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))||this).history=createHashHistory(e.props),e}return _inheritsLoose(e,r),e.prototype.render=function(){return React.createElement(Router,{history:this.history,children:this.props.children})},e}(React.Component),resolveToLocation=function(e,t){return"function"==typeof e?e(t):e},normalizeToLocation=function(e,t){return"string"==typeof e?createLocation(e,null,null,t):e};function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function LinkAnchor(e){var t=e.innerRef,n=e.navigate,a=e.onClick,r=_objectWithoutPropertiesLoose(e,["innerRef","navigate","onClick"]),o=r.target;return React.createElement("a",_extends({},r,{ref:t,onClick:function(t){try{a&&a(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||o&&"_self"!==o||isModifiedEvent(t)||(t.preventDefault(),n())}}))}function Link(e){var t=e.component,r=void 0===t?LinkAnchor:t,o=e.replace,i=e.to,c=_objectWithoutPropertiesLoose(e,["component","replace","to"]);return React.createElement(context.Consumer,null,function(t){t||invariant(!1);var n=t.history,e=normalizeToLocation(resolveToLocation(i,t.location),t.location),a=e?n.createHref(e):"";return React.createElement(r,_extends({},c,{href:a,navigate:function(){var e=resolveToLocation(i,t.location);(o?n.replace:n.push)(e)}}))})}function joinClassnames(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return e}).join(" ")}function NavLink(e){var t=e["aria-current"],h=void 0===t?"page":t,n=e.activeClassName,l=void 0===n?"active":n,p=e.activeStyle,f=e.className,d=e.exact,m=e.isActive,v=e.location,g=e.strict,y=e.style,E=e.to,P=_objectWithoutPropertiesLoose(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to"]);return React.createElement(context.Consumer,null,function(e){e||invariant(!1);var t=v||e.location,n=t.pathname,a=normalizeToLocation(resolveToLocation(E,t),t),r=a.pathname,o=r&&r.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),i=o?matchPath(n,{path:o,exact:d,strict:g}):null,c=!!(m?m(i,e.location):i),s=c?joinClassnames(f,l):f,u=c?_extends({},y,p):y;return React.createElement(Link,_extends({"aria-current":c&&h||null,className:s,style:u,to:a},P))})}exports.BrowserRouter=BrowserRouter,exports.HashRouter=HashRouter,exports.Link=Link,exports.NavLink=NavLink,exports.MemoryRouter=MemoryRouter,exports.Prompt=Prompt,exports.Redirect=Redirect,exports.Route=Route,exports.Router=Router,exports.StaticRouter=StaticRouter,exports.Switch=Switch,exports.generatePath=generatePath,exports.matchPath=matchPath,exports.withRouter=withRouter,exports.renderRoutes=renderRoutes,exports.__RouterContext=context,exports.createBrowserHistory=createBrowserHistory,exports.createHashHistory=createHashHistory,exports.createMemoryHistory=createMemoryHistory,exports.createLocation=createLocation,exports.locationsAreEqual=locationsAreEqual,exports.parsePath=parsePath,exports.createPath=createPath;
