"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var resolvePathname=_interopDefault(require("resolve-pathname")),valueEqual=_interopDefault(require("value-equal"));require("tiny-warning");var invariant=_interopDefault(require("tiny-invariant")),createContext=_interopDefault(require("mini-create-react-context")),React=_interopDefault(require("react"));require("prop-types");var pathToRegexp=_interopDefault(require("path-to-regexp"));require("react-is");var hoistStatics=_interopDefault(require("hoist-non-react-statics"));function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function _objectWithoutPropertiesLoose(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],0<=e.indexOf(n)||(r[n]=t[n]);return r}function addLeadingSlash(t){return"/"===t.charAt(0)?t:"/"+t}function stripLeadingSlash(t){return"/"===t.charAt(0)?t.substr(1):t}function hasBasename(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}function stripBasename(t,e){return hasBasename(t,e)?t.substr(e.length):t}function stripTrailingSlash(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function parsePath(t){var e=t||"/",n="",a="",r=e.indexOf("#");-1!==r&&(a=e.substr(r),e=e.substr(0,r));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===a?"":a}}function createPath(t){var e=t.pathname,n=t.search,a=t.hash,r=e||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),a&&"#"!==a&&(r+="#"===a.charAt(0)?a:"#"+a),r}function createLocation(t,e,n,a){var r;return"string"==typeof t?(r=parsePath(t)).state=e:(void 0===(r=_extends({},t)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==e&&void 0===r.state&&(r.state=e)),n&&(r.key=n),a?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=resolvePathname(r.pathname,a.pathname)):r.pathname=a.pathname:r.pathname||(r.pathname="/"),r}function locationsAreEqual(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&valueEqual(t.state,e.state)}function createTransitionManager(){var o=null;var a=[];return{setPrompt:function(t){return o=t,function(){o===t&&(o=null)}},confirmTransitionTo:function(t,e,n,a){if(null!=o){var r="function"==typeof o?o(t,e):o;"string"==typeof r?"function"==typeof n?n(r,a):a(!0):a(!1!==r)}else a(!0)},appendListener:function(t){var e=!0;function n(){e&&t.apply(void 0,arguments)}return a.push(n),function(){e=!1,a=a.filter(function(t){return t!==n})}},notifyListeners:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];a.forEach(function(t){return t.apply(void 0,e)})}}}var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement);function getConfirmation(t,e){e(window.confirm(t))}function supportsHistory(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}function supportsPopStateOnHashChange(){return-1===window.navigator.userAgent.indexOf("Trident")}function supportsGoWithoutReloadUsingHash(){return-1===window.navigator.userAgent.indexOf("Firefox")}function isExtraneousPopstateEvent(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}var PopStateEvent="popstate",HashChangeEvent="hashchange";function getHistoryState(){try{return window.history.state||{}}catch(t){return{}}}function createBrowserHistory(t){void 0===t&&(t={}),canUseDOM||invariant(!1);var c=window.history,s=supportsHistory(),e=!supportsPopStateOnHashChange(),n=null,a=t,r=a.forceRefresh,u=void 0!==r&&r,o=a.getUserConfirmation,h=void 0===o?getConfirmation:o,i=a.keyLength,l=void 0===i?6:i,p=t.basename?stripTrailingSlash(addLeadingSlash(t.basename)):"";function f(t){var e=t||{},n=e.key,a=e.state,r=window.location,o=r.pathname+r.search+r.hash;return p&&(o=stripBasename(o,p)),createLocation(o,a,n)}function d(){return Math.random().toString(36).substr(2,l)}var m=createTransitionManager();function v(t){t&&"PUSH"==t.action?window.globalManger.push(t.location):"REPLACE"==t.action?(window.globalManger.pop(),window.globalManger.push(t.location)):"POP"==t.action&&(n?(window.globalManger=window.globalManger.slice(0,n),n=null):window.globalManger.pop()),Object.assign(C,t),C.length=c.length,m.notifyListeners(C.location,C.action)}function g(t){isExtraneousPopstateEvent(t)||P(f(t.state))}function y(){P(f(getHistoryState()))}var E=!1;function P(e){if(E)E=!1,v();else{m.confirmTransitionTo(e,"POP",h,function(t){t?v({action:"POP",location:e}):function(t){var e=C.location,n=R.indexOf(e.key);-1===n&&(n=0);var a=R.indexOf(t.key);-1===a&&(a=0);var r=n-a;r&&(E=!0,w(r))}(e)})}}var x=f(getHistoryState());window.globalManger=[x];var R=[x.key];function _(t){return p+createPath(t)}function w(t){n=t,c.go(t)}var S=0;function T(t){1===(S+=t)&&1===t?(window.addEventListener(PopStateEvent,g),e&&window.addEventListener(HashChangeEvent,y)):0===S&&(window.removeEventListener(PopStateEvent,g),e&&window.removeEventListener(HashChangeEvent,y))}var L=!1;var C={length:c.length,action:"POP",location:x,createHref:_,push:function(t,e){var i=createLocation(t,e,d(),C.location);m.confirmTransitionTo(i,"PUSH",h,function(t){if(t){var e=_(i),n=i.key,a=i.state;if(s)if(c.pushState({key:n,state:a},null,e),u)window.location.href=e;else{var r=R.indexOf(C.location.key),o=R.slice(0,-1===r?0:r+1);o.push(i.key),R=o,v({action:"PUSH",location:i})}else window.location.href=e}})},replace:function(t,e){var o="REPLACE",i=createLocation(t,e,d(),C.location);m.confirmTransitionTo(i,o,h,function(t){if(t){var e=_(i),n=i.key,a=i.state;if(s)if(c.replaceState({key:n,state:a},null,e),u)window.location.replace(e);else{var r=R.indexOf(C.location.key);-1!==r&&(R[r]=i.key),v({action:o,location:i})}else window.location.replace(e)}})},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},block:function(t){void 0===t&&(t=!1);var e=m.setPrompt(t);return L||(T(1),L=!0),function(){return L&&(L=!1,T(-1)),e()}},listen:function(t){var e=m.appendListener(t);return T(1),function(){T(-1),e()}}};return C}console.log("======== freya-history =========");var HashChangeEvent$1="hashchange",HashPathCoders={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+stripLeadingSlash(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash},slash:{encodePath:addLeadingSlash,decodePath:addLeadingSlash}};function getHashPath(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function pushHashPath(t){window.location.hash=t}function replaceHashPath(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,0<=e?e:0)+"#"+t)}function createHashHistory(t){void 0===t&&(t={}),canUseDOM||invariant(!1);var e=window.history,n=(supportsGoWithoutReloadUsingHash(),t),a=n.getUserConfirmation,i=void 0===a?getConfirmation:a,r=n.hashType,o=void 0===r?"slash":r,c=t.basename?stripTrailingSlash(addLeadingSlash(t.basename)):"",s=HashPathCoders[o],u=s.encodePath,h=s.decodePath;function l(){var t=h(getHashPath());return c&&(t=stripBasename(t,c)),createLocation(t)}var p=createTransitionManager();function f(t){Object.assign(S,t),S.length=e.length,p.notifyListeners(S.location,S.action)}var d=!1,m=null;function v(){var t=getHashPath(),e=u(t);if(t!==e)replaceHashPath(e);else{var n=l(),a=S.location;if(!d&&locationsAreEqual(a,n))return;if(m===createPath(n))return;m=null,function(e){if(d)d=!1,f();else{p.confirmTransitionTo(e,"POP",i,function(t){t?f({action:"POP",location:e}):function(t){var e=S.location,n=P.lastIndexOf(createPath(e));-1===n&&(n=0);var a=P.lastIndexOf(createPath(t));-1===a&&(a=0);var r=n-a;r&&(d=!0,x(r))}(e)})}}(n)}}var g=getHashPath(),y=u(g);g!==y&&replaceHashPath(y);var E=l(),P=[createPath(E)];function x(t){e.go(t)}var R=0;function _(t){1===(R+=t)&&1===t?window.addEventListener(HashChangeEvent$1,v):0===R&&window.removeEventListener(HashChangeEvent$1,v)}var w=!1;var S={length:e.length,action:"POP",location:E,createHref:function(t){return"#"+u(c+createPath(t))},push:function(t,e){var o=createLocation(t,void 0,void 0,S.location);p.confirmTransitionTo(o,"PUSH",i,function(t){if(t){var e=createPath(o),n=u(c+e);if(getHashPath()!==n){m=e,pushHashPath(n);var a=P.lastIndexOf(createPath(S.location)),r=P.slice(0,-1===a?0:a+1);r.push(e),P=r,f({action:"PUSH",location:o})}else f()}})},replace:function(t,e){var r="REPLACE",o=createLocation(t,void 0,void 0,S.location);p.confirmTransitionTo(o,r,i,function(t){if(t){var e=createPath(o),n=u(c+e);getHashPath()!==n&&(m=e,replaceHashPath(n));var a=P.indexOf(createPath(S.location));-1!==a&&(P[a]=e),f({action:r,location:o})}})},go:x,goBack:function(){x(-1)},goForward:function(){x(1)},block:function(t){void 0===t&&(t=!1);var e=p.setPrompt(t);return w||(_(1),w=!0),function(){return w&&(w=!1,_(-1)),e()}},listen:function(t){var e=p.appendListener(t);return _(1),function(){_(-1),e()}}};return S}function clamp(t,e,n){return Math.min(Math.max(t,e),n)}function createMemoryHistory(t){void 0===t&&(t={});var e=t,r=e.getUserConfirmation,n=e.initialEntries,a=void 0===n?["/"]:n,o=e.initialIndex,i=void 0===o?0:o,c=e.keyLength,s=void 0===c?6:c,u=createTransitionManager();function h(t){Object.assign(v,t),v.length=v.entries.length,u.notifyListeners(v.location,v.action)}function l(){return Math.random().toString(36).substr(2,s)}var p=clamp(i,0,a.length-1),f=a.map(function(t){return createLocation(t,void 0,"string"==typeof t?l():t.key||l())}),d=createPath;function m(t){var e=clamp(v.index+t,0,v.entries.length-1),n=v.entries[e];u.confirmTransitionTo(n,"POP",r,function(t){t?h({action:"POP",location:n,index:e}):h()})}var v={length:f.length,action:"POP",location:f[p],index:p,entries:f,createHref:d,push:function(t,e){var a=createLocation(t,e,l(),v.location);u.confirmTransitionTo(a,"PUSH",r,function(t){if(t){var e=v.index+1,n=v.entries.slice(0);n.length>e?n.splice(e,n.length-e,a):n.push(a),h({action:"PUSH",location:a,index:e,entries:n})}})},replace:function(t,e){var n="REPLACE",a=createLocation(t,e,l(),v.location);u.confirmTransitionTo(a,n,r,function(t){t&&(v.entries[v.index]=a,h({action:n,location:a}))})},go:m,goBack:function(){m(-1)},goForward:function(){m(1)},canGo:function(t){var e=v.index+t;return 0<=e&&e<v.entries.length},block:function(t){return void 0===t&&(t=!1),u.setPrompt(t)},listen:function(t){return u.appendListener(t)}};return v}var createNamedContext=function(t){var e=createContext();return e.displayName=t,e},context=createNamedContext("Router"),Router=function(n){function t(t){var e;return(e=n.call(this,t)||this).state={location:t.history.location},e._isMounted=!1,e._pendingLocation=null,t.staticContext||(e.unlisten=t.history.listen(function(t){e._isMounted?e.setState({location:t}):e._pendingLocation=t})),e}_inheritsLoose(t,n),t.computeRootMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}};var e=t.prototype;return e.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},e.componentWillUnmount=function(){this.unlisten&&this.unlisten()},e.render=function(){return React.createElement(context.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}})},t}(React.Component),MemoryRouter=function(r){function t(){for(var t,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(t=r.call.apply(r,[this].concat(n))||this).history=createMemoryHistory(t.props),t}return _inheritsLoose(t,r),t.prototype.render=function(){return React.createElement(Router,{history:this.history,children:this.props.children})},t}(React.Component),Lifecycle=function(t){function e(){return t.apply(this,arguments)||this}_inheritsLoose(e,t);var n=e.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(t){this.props.onUpdate&&this.props.onUpdate.call(this,this,t)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},e}(React.Component);function Prompt(t){var a=t.message,e=t.when,r=void 0===e||e;return React.createElement(context.Consumer,null,function(t){if(t||invariant(!1),!r||t.staticContext)return null;var n=t.history.block;return React.createElement(Lifecycle,{onMount:function(t){t.release=n(a)},onUpdate:function(t,e){e.message!==a&&(t.release(),t.release=n(a))},onUnmount:function(t){t.release()},message:a})})}var cache={},cacheLimit=1e4,cacheCount=0;function compilePath(t){if(cache[t])return cache[t];var e=pathToRegexp.compile(t);return cacheCount<cacheLimit&&(cache[t]=e,cacheCount++),e}function generatePath(t,e){return void 0===t&&(t="/"),void 0===e&&(e={}),"/"===t?t:compilePath(t)(e,{pretty:!0})}function Redirect(t){var o=t.computedMatch,i=t.to,e=t.push,c=void 0!==e&&e;return React.createElement(context.Consumer,null,function(t){t||invariant(!1);var e=t.history,n=t.staticContext,a=c?e.push:e.replace,r=createLocation(o?"string"==typeof i?generatePath(i,o.params):_extends({},i,{pathname:generatePath(i.pathname,o.params)}):i);return n?(a(r),null):React.createElement(Lifecycle,{onMount:function(){a(r)},onUpdate:function(t,e){var n=createLocation(e.to);locationsAreEqual(n,_extends({},r,{key:n.key}))||a(r)},to:i})})}var cache$1={},cacheLimit$1=1e4,cacheCount$1=0;function compilePath$1(t,e){var n=""+e.end+e.strict+e.sensitive,a=cache$1[n]||(cache$1[n]={});if(a[t])return a[t];var r=[],o={regexp:pathToRegexp(t,r,e),keys:r};return cacheCount$1<cacheLimit$1&&(a[t]=o,cacheCount$1++),o}function matchPath(u,t){void 0===t&&(t={}),"string"!=typeof t&&!Array.isArray(t)||(t={path:t});var e=t,n=e.path,a=e.exact,h=void 0!==a&&a,r=e.strict,l=void 0!==r&&r,o=e.sensitive,p=void 0!==o&&o;return[].concat(n).reduce(function(t,e){if(!e)return null;if(t)return t;var n=compilePath$1(e,{end:h,strict:l,sensitive:p}),a=n.regexp,r=n.keys,o=a.exec(u);if(!o)return null;var i=o[0],c=o.slice(1),s=u===i;return h&&!s?null:{path:e,url:"/"===e&&""===i?"/":i,isExact:s,params:r.reduce(function(t,e,n){return t[e.name]=c[n],t},{})}},null)}function isEmptyChildren(t){return 0===React.Children.count(t)}var Route=function(t){function e(){return t.apply(this,arguments)||this}return _inheritsLoose(e,t),e.prototype.render=function(){var c=this;return React.createElement(context.Consumer,null,function(t){t||invariant(!1);var e=c.props.location||t.location,n=_extends({},t,{location:e,match:c.props.computedMatch?c.props.computedMatch:c.props.path?matchPath(e.pathname,c.props):t.match}),a=c.props,r=a.children,o=a.component,i=a.render;return Array.isArray(r)&&0===r.length&&(r=null),"function"==typeof r&&void 0===(r=r(n))&&(r=null),React.createElement(context.Provider,{value:n},r&&!isEmptyChildren(r)?r:n.match?o?React.createElement(o,n):i?i(n):null:null)})},e}(React.Component);function addLeadingSlash$1(t){return"/"===t.charAt(0)?t:"/"+t}function addBasename(t,e){return t?_extends({},e,{pathname:addLeadingSlash$1(t)+e.pathname}):e}function stripBasename$1(t,e){if(!t)return e;var n=addLeadingSlash$1(t);return 0!==e.pathname.indexOf(n)?e:_extends({},e,{pathname:e.pathname.substr(n.length)})}function createURL(t){return"string"==typeof t?t:createPath(t)}function staticHandler(t){return function(){invariant(!1)}}function noop(){}var StaticRouter=function(r){function t(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))||this).handlePush=function(t){return e.navigateTo(t,"PUSH")},e.handleReplace=function(t){return e.navigateTo(t,"REPLACE")},e.handleListen=function(){return noop},e.handleBlock=function(){return noop},e}_inheritsLoose(t,r);var e=t.prototype;return e.navigateTo=function(t,e){var n=this.props,a=n.basename,r=void 0===a?"":a,o=n.context,i=void 0===o?{}:o;i.action=e,i.location=addBasename(r,createLocation(t)),i.url=createURL(i.location)},e.render=function(){var t=this.props,e=t.basename,n=void 0===e?"":e,a=t.context,r=void 0===a?{}:a,o=t.location,i=void 0===o?"/":o,c=_objectWithoutPropertiesLoose(t,["basename","context","location"]),s={createHref:function(t){return addLeadingSlash$1(n+createURL(t))},action:"POP",location:stripBasename$1(n,createLocation(i)),push:this.handlePush,replace:this.handleReplace,go:staticHandler("go"),goBack:staticHandler("goBack"),goForward:staticHandler("goForward"),listen:this.handleListen,block:this.handleBlock};return React.createElement(Router,_extends({},c,{history:s,staticContext:r}))},t}(React.Component),push_match={background:"#fff",boxShadow:"-2px 0 5px rgba(0, 0, 0, .2)"},push_current={zIndex:-1,position:"absolute",left:0,top:0},gesture_current={zIndex:-1,position:"absolute",left:0,top:0},pop_match={background:"#fff",boxShadow:"-2px 0 5px rgba(0, 0, 0, .2)"},pop_current={position:"absolute",left:0,top:0,boxShadow:"-2px 0 5px rgba(0, 0, 0, .2)",background:"#fff"},Switch=function(t){function e(){return t.apply(this,arguments)||this}return _inheritsLoose(e,t),e.prototype.render=function(){var e=this;return React.createElement(context.Consumer,null,function(t){return React.createElement(AnimateRoute,_extends({},e.props,{adapt:t}))})},e}(React.Component),isWebView="undefined"!=typeof navigator&&/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),AnimateRoute=function(a){function t(){for(var h,t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(h=a.call.apply(a,[this].concat(e))||this).currentPage=null,h.matchPage=null,h.action="",h.canAnimate=!0,h.SCREEN_WIDTH=window.innerWidth,h.MATCH_SCREEN_OFFSET=h.SCREEN_WIDTH,h.BOTTOM_SCREEN_OFFSET=.3*-h.SCREEN_WIDTH,h.BACK_ACTIVE_POSITION=.1*h.SCREEN_WIDTH,h.SIZE={width:window.innerWidth,height:window.innerHeight},h.disabledBodyTouch=function(t){t._isScroller||t.preventDefault()},h.toggleBodyTouch=function(t){t?document.body.removeEventListener("touchmove",h.disabledBodyTouch):document.body.addEventListener("touchmove",h.disabledBodyTouch,{passive:!1})},h.easeInQuad=function(t,e,n,a){var r=t/a;return e+n*(r*r)},h.easeOutQuad=function(t,e,n,a){var r=t/a;return e+n*(-r*r+2*r)},h.easeInOut=function(t,e,n,a){if(t<a/2)return h.easeInQuad(t,e,n/2,a/2);var r=t-a/2,o=e+n/2;return h.easeOutQuad(r,o,n/2,a/2)},h.animate=function(t){var r=t.begin,o=t.end,i=t.ref,c=t.done,e=t.type,n=void 0===e?"ease-in-out":e,a=t.duration,s=void 0===a?.1:a,u="ease-in-out"==n?h.easeInOut:"ease-in"==n?h.easeInQuad:"ease-out"==n?h.easeOutQuad:h.easeInOut;!function e(n){var a=u(n,r,o-r,s);requestAnimationFrame(function(t){i.style.transform="translate3d("+a+"px,0px,0)",a!=o?e(n+.01):c&&c()})}(0)},h.animatePop=function(){h.animate({begin:h.BOTTOM_SCREEN_OFFSET,end:0,ref:h.matchRef}),h.animate({begin:0,end:h.MATCH_SCREEN_OFFSET,ref:h.currentRef,done:function(t){return h.currentRef.style.display="none"}})},h.animatePush=function(){h.animate({begin:h.MATCH_SCREEN_OFFSET,end:0,ref:h.matchRef}),h.animate({begin:0,end:h.BOTTOM_SCREEN_OFFSET,ref:h.currentRef})},h.findMatchElement=function(n){var a,r;return n=n||h.props.location||h.props.adapt.location,React.Children.forEach(h.props.children,function(t){if(null==r&&React.isValidElement(t)){var e=(a=t).props.path||t.props.from;r=e?matchPath(n.pathname,_extends({},t.props,{path:e})):h.props.adapt.match}}),r?React.cloneElement(a,{location:n,computedMatch:r}):null},h.findMatchElementByLocation=function(t){return h.findMatchElement(t)},h.setTransform=function(t){h.matchRef.style.transform="translate3d("+t+"px,0px,0)",h.setBottomTransform(t)},h.setBottomTransform=function(t){var e=h.BOTTOM_SCREEN_OFFSET+.3*t;h.currentRef.style.transform="translate3d("+e+"px,0px,0)"},h.onTouchStart=function(t){document.getElementById("root").style.overflow="hidden",h._ScreenX=h._startScreenX=t.touches[0].screenX,h.gestureBackActive=h._startScreenX<h.BACK_ACTIVE_POSITION,h._lastScreenX=h._lastScreenX||0,h.startTime=+new Date},h.onTouchMove=function(t){if(h.gestureBackActive){var e=t.touches[0].screenX;if(!(h._startScreenX>e)){t.preventDefault();var n=Math.round(e-h._ScreenX);h._ScreenX=e,h._lastScreenX+=n,h.setTransform(h._lastScreenX),isWebView&&t.changedTouches[0].clientY<0&&h.onTouchEnd()}}},h.reset=function(){h.animate({begin:h._lastScreenX,end:0,ref:h.matchRef})},h.onTouchEnd=function(t){if(h.gestureBackActive){var e=+new Date-h.startTime;document.getElementById("root").style.overflow=null,e<300&&h._lastScreenX>.2*h.SCREEN_WIDTH?(h.animate({begin:h.BOTTOM_SCREEN_OFFSET+.3*h._lastScreenX,end:0,ref:h.currentRef,duration:.05}),h.animate({begin:h._lastScreenX,end:h.SCREEN_WIDTH,ref:h.matchRef,done:h.props.adapt.history.goBack,type:"ease-out",duration:.05}),h._lastScreenX=0,h.fromGesture=!0,h.gestureBackActive=!1):(h._lastScreenX<h.SCREEN_WIDTH/2?h.reset():(h.animate({begin:h.BOTTOM_SCREEN_OFFSET+.3*h._lastScreenX,end:0,ref:h.currentRef,duration:.05}),h.animate({begin:h._lastScreenX,end:h.SCREEN_WIDTH,ref:h.matchRef,done:h.props.adapt.history.goBack,type:"ease-out",duration:.05}),h.fromGesture=!0),h.gestureBackActive=!1,h._lastScreenX=0)}},h.renderGesture=function(){return h.single?h.matchPage:(h.currentPage=h.findMatchElementByLocation(window.globalManger[window.globalManger.length-2]),React.createElement(React.Fragment,null,React.createElement("div",{style:_extends({transform:"translate3d("+h.BOTTOM_SCREEN_OFFSET+"px,0px,0)"},h.SIZE,{gesture_current:gesture_current}),key:Math.random(),ref:function(t){return h.currentRef=t}},h.currentPage),React.createElement("div",{onTouchStart:h.onTouchStart,onTouchMove:h.onTouchMove,onTouchEnd:h.onTouchEnd,style:_extends({},h.SIZE,pop_match),key:Math.random(),ref:function(t){return h.matchRef=t}},h.matchPage)))},h.renderPop=function(){return h.currentPage?h.fromGesture?h.renderGesture():h.currentPage.props.path==h.matchPage.props.path?(h.props.adapt.history.goBack(),h.canAnimate=!1,h.matchPage):React.createElement(React.Fragment,null,React.createElement("div",{onTouchStart:h.single?null:h.onTouchStart,onTouchMove:h.single?null:h.onTouchMove,onTouchEnd:h.single?null:h.onTouchEnd,style:_extends({transform:"translate3d("+h.BOTTOM_SCREEN_OFFSET+"px,0px,0)"},h.SIZE,pop_match),key:Math.random(),ref:function(t){return h.matchRef=t}},h.matchPage),React.createElement("div",{style:_extends({transform:"translate3d(0px,0px,0)"},h.SIZE,pop_current),key:Math.random(),ref:function(t){return h.currentRef=t}},h.currentPage)):h.matchPage},h.renderPush=function(){return React.createElement(React.Fragment,null,React.createElement("div",{style:_extends({transform:"translate3d(0px,0px,0)"},h.SIZE,push_current),key:Math.random(),ref:function(t){return h.currentRef=t}},h.currentPage),React.createElement("div",{onTouchStart:h.onTouchStart,onTouchMove:h.onTouchMove,onTouchEnd:h.onTouchEnd,style:_extends({transform:"translate3d("+h.MATCH_SCREEN_OFFSET+"px,0px,0)"},h.SIZE,push_match),key:Math.random(),ref:function(t){return h.matchRef=t}},h.matchPage))},h.preRender=function(){h.action=h.props.adapt.history.action,h.single=1==window.globalManger.length,h.toggleBodyTouch(h.single),h.currentPage=h.matchPage,h.matchPage=h.findMatchElement()},h}_inheritsLoose(t,a);var e=t.prototype;return e.componentDidUpdate=function(t,e,n){this.canAnimate&&!this.fromGesture&&("POP"==this.action?this.animatePop():this.animatePush()),this.fromGesture=!1,this.canAnimate=!0},e.render=function(){return this.preRender(),this.matchPage?"POP"==this.action?this.renderPop():this.renderPush():"404"},t}(React.Component);function withRouter(a){function t(t){var e=t.wrappedComponentRef,n=_objectWithoutPropertiesLoose(t,["wrappedComponentRef"]);return React.createElement(context.Consumer,null,function(t){return t||invariant(!1),React.createElement(a,_extends({},n,t,{ref:e}))})}var e="withRouter("+(a.displayName||a.name)+")";return t.displayName=e,t.WrappedComponent=a,hoistStatics(t,a)}function renderRoutes(t){return React.createElement(Switch,null,t.map(function(t){return React.createElement(Route,_extends({key:t.path.toString()},t))}))}var BrowserRouter=function(r){function t(){for(var t,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(t=r.call.apply(r,[this].concat(n))||this).history=createBrowserHistory(t.props),t}return _inheritsLoose(t,r),t.prototype.render=function(){return React.createElement(Router,{history:this.history,children:this.props.children})},t}(React.Component),HashRouter=function(r){function t(){for(var t,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(t=r.call.apply(r,[this].concat(n))||this).history=createHashHistory(t.props),t}return _inheritsLoose(t,r),t.prototype.render=function(){return React.createElement(Router,{history:this.history,children:this.props.children})},t}(React.Component),resolveToLocation=function(t,e){return"function"==typeof t?t(e):t},normalizeToLocation=function(t,e){return"string"==typeof t?createLocation(t,null,null,e):t};function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function LinkAnchor(t){var e=t.innerRef,n=t.navigate,a=t.onClick,r=_objectWithoutPropertiesLoose(t,["innerRef","navigate","onClick"]),o=r.target;return React.createElement("a",_extends({},r,{ref:e,onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||o&&"_self"!==o||isModifiedEvent(e)||(e.preventDefault(),n())}}))}function Link(t){var e=t.component,r=void 0===e?LinkAnchor:e,o=t.replace,i=t.to,c=_objectWithoutPropertiesLoose(t,["component","replace","to"]);return React.createElement(context.Consumer,null,function(e){e||invariant(!1);var n=e.history,t=normalizeToLocation(resolveToLocation(i,e.location),e.location),a=t?n.createHref(t):"";return React.createElement(r,_extends({},c,{href:a,navigate:function(){var t=resolveToLocation(i,e.location);(o?n.replace:n.push)(t)}}))})}function joinClassnames(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(function(t){return t}).join(" ")}function NavLink(t){var e=t["aria-current"],h=void 0===e?"page":e,n=t.activeClassName,l=void 0===n?"active":n,p=t.activeStyle,f=t.className,d=t.exact,m=t.isActive,v=t.location,g=t.strict,y=t.style,E=t.to,P=_objectWithoutPropertiesLoose(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to"]);return React.createElement(context.Consumer,null,function(t){t||invariant(!1);var e=v||t.location,n=e.pathname,a=normalizeToLocation(resolveToLocation(E,e),e),r=a.pathname,o=r&&r.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),i=o?matchPath(n,{path:o,exact:d,strict:g}):null,c=!!(m?m(i,t.location):i),s=c?joinClassnames(f,l):f,u=c?_extends({},y,p):y;return React.createElement(Link,_extends({"aria-current":c&&h||null,className:s,style:u,to:a},P))})}exports.BrowserRouter=BrowserRouter,exports.HashRouter=HashRouter,exports.Link=Link,exports.NavLink=NavLink,exports.MemoryRouter=MemoryRouter,exports.Prompt=Prompt,exports.Redirect=Redirect,exports.Route=Route,exports.Router=Router,exports.StaticRouter=StaticRouter,exports.Switch=Switch,exports.generatePath=generatePath,exports.matchPath=matchPath,exports.withRouter=withRouter,exports.renderRoutes=renderRoutes,exports.__RouterContext=context,exports.createBrowserHistory=createBrowserHistory,exports.createHashHistory=createHashHistory,exports.createMemoryHistory=createMemoryHistory,exports.createLocation=createLocation,exports.locationsAreEqual=locationsAreEqual,exports.parsePath=parsePath,exports.createPath=createPath;
